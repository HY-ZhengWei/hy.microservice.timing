<?xml version="1.0" encoding="UTF-8"?>

<config>

    <import name="sqls"            class="java.util.ArrayList" />
    <import name="sql"             class="org.hy.common.xml.XSQL" />



    <!-- 任务责任人关系的相关SQL -->
    <sqls>
    
        <sql id="XSQL_Timing_Create_JobUserRef">
        
            <dataSourceGroup ref="DSG_MS_Timing" />
            
            <content>
                <![CDATA[
                CREATE TABLE TJobUserRef
                (
                 jobID                      VARCHAR(64)   NOT NULL        COMMENT '任务ID'
                ,userID                     VARCHAR(64)   NOT NULL        COMMENT '用户ID'
                ,createUserID               VARCHAR(64)   NOT NULL        COMMENT '数据创建人ID'
                ,createTime                 DATETIME      NOT NULL        COMMENT '创建时间'
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;/
                
                ALTER TABLE TJobUserRef ADD CONSTRAINT PK_JobUserRef     PRIMARY KEY (jobID ,userID);/
                ALTER TABLE TJobUserRef ADD CONSTRAINT FK_JobUserRef_JID FOREIGN KEY (jobID)  REFERENCES TJobConfig (id);/
                ALTER TABLE TJobUserRef ADD CONSTRAINT FK_JobUserRef_UID FOREIGN KEY (userID) REFERENCES TJobUser   (id);/
                
                Alter TABLE TJobUserRef COMMENT                           = '任务责任人关系';/
                ]]>
            </content>
            
            <comment>任务责任人关系</comment>
            <create if="启用 == IsCreateDB_MS_Timing.getValue">TJobUserRef</create>
            
        </sql>
        
    </sqls>
    
</config>